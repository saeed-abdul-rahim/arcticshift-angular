<div class="relative border border-gray-300 bg-gray-100 rounded-md my-5 font-light text-sm">
    <div class="absolute w-full h-full bg-gray-100 opacity-50 z-10 flex justify-center items-center" *ngIf="loading">
        <app-spinner [size]="5"></app-spinner>
    </div>
    <div class="relative">
        <div class="border-b border-gray-300 p-5 flex justify-between">
            <div>
                Subtotal
            </div>
            <div *ngIf="draft && settings">
                {{ draft.subTotal | currency: settings.currency }}
            </div>
        </div>
        <div class="border-b border-gray-300 p-5" *ngIf="freeShipping">
            <div class="text-center font-semibold text-green-600">FREE SHIPPING</div>
        </div>
        <div class="border-b border-gray-300 p-5"
            *ngIf="((draft && draft.shippingAddress && !disableAddress) || shippingRates.length > 1) && !freeShipping">
            Shipping
            <div class="flex flex-col my-auto pt-3">
                <div class="flex" *ngFor="let shippingRate of shippingRates; trackBy: trackByFn">
                    <input #shippingRateRadio type="radio" name="shippingRate" class="my-auto"
                        value="{{shippingRate.id}}" (change)="setShippingRate(shippingRateRadio.value)" />
                    <div class="ml-2 flex flex-1 justify-between">
                        <label for=""> {{shippingRate.name}} </label>
                        <label for=""> {{shippingRate.price | currency: settings.currency }} </label>
                    </div>
                </div>
            </div>
            <div class="my-3" *ngIf="draft && draft.shippingAddress && !disableAddress">
                Shipping to
                <span class="font-normal">
                    {{ draft.shippingAddress.line1 }}, {{ draft.shippingAddress.area }}, {{ getCountryName(draft.shippingAddress.country, 'alpha3') }}
                </span>
            </div>
            <div class="mb-5 flex cursor-pointer" (click)="toggleAddress()"
                *ngIf="draft && draft.shippingAddress && !disableAddress">
                <fa-icon class="mr-2" [icon]="faMapMarkerAlt"></fa-icon>
                Change Address
                <fa-icon class="ml-2" [icon]="faChevronDown" size="xs"></fa-icon>
            </div>
            <div class="slider" [class.closed]="!showAddress">
                <div class="p-1 flex flex-col">
                    <input type="text" class="mb-2 arc-input placeholder-gray-400" placeholder="Address line" />
                    <input type="text" class="mb-2 arc-input placeholder-gray-400" placeholder="Town / City" />
                    <ng-select class="mb-2" placeholder="State / County"></ng-select>
                    <ng-select class="mb-2" placeholder="Country" [items]="countryList" bindValue="alpha3"
                        bindLabel="name"></ng-select>
                    <input type="text" class="mb-3 arc-input placeholder-gray-400" placeholder="Postcode / ZIP" />
                    <app-button color="gray" [label]="'Update'" [dark]="true" [fullWidth]="true"></app-button>
                </div>
            </div>
        </div>
        <div class="border-b border-gray-300 p-5"
            *ngIf="draft && (draft.saleDiscount > 0 || draft.voucherDiscount > 0 || draft.taxCharge > 0 || draft.shippingCharge > 0)">
            <div class="flex justify-between" *ngIf="draft.saleDiscount > 0">
                <div>
                    Discount
                </div>
                <div *ngIf="settings">
                    -{{ draft.saleDiscount | currency: settings.currency }}
                </div>
            </div>
            <div class="flex justify-between" *ngIf="draft.taxCharge > 0">
                <div>
                    Taxes
                </div>
                <div *ngIf="settings">
                    +{{ draft.taxCharge | currency: settings.currency }}
                </div>
            </div>
            <div class="flex justify-between" *ngIf="draft.shippingCharge > 0">
                <div>
                    Shipping
                </div>
                <div *ngIf="settings">
                    +{{ draft.shippingCharge | currency: settings.currency }}
                </div>
            </div>
            <div class="flex justify-between" *ngIf="draft.voucherDiscount > 0">
                <div>
                    Voucher
                </div>
                <div *ngIf="settings">
                    -{{ draft.voucherDiscount | currency: settings.currency }}
                </div>
            </div>
        </div>
        <div class="p-4 flex justify-between text-xl">
            <div>
                Total
            </div>
            <div *ngIf="draft && settings">
                {{ draft.total | currency: settings.currency }}
            </div>
        </div>
    </div>
</div>